{"version":3,"sources":["components/Cell.js","components/DistrictRow.js","components/Row.js"],"names":["React","memo","statistic","data","isPerMillion","lastUpdatedTT","getTableStatistic","total","delta","spring","useSpring","config","SPRING_CONFIG_NUMBERS","statisticConfig","STATISTIC_CONFIGS","className","hideDelta","div","classnames","title","interpolate","formatNumber","format","Math","abs","prevProps","currProps","equal","stateCode","districtName","regionHighlighted","setRegionHighlighted","expandTable","t","useTranslation","highlightDistrict","useCallback","produce","draftRegionHighlighted","tableStatistics","TABLE_STATISTICS_EXPANDED","TABLE_STATISTICS","onMouseEnter","meta","notes","Tooltip","size","map","key","useState","showDistricts","setShowDistricts","useSessionStorage","sortColumn","isAscending","sortData","setSortData","history","useHistory","rowElement","useRef","handleSortClick","draftSortData","sortingFunction","districtNameA","districtNameB","dataType","statisticA","districts","statisticB","localeCompare","highlightState","_setShowDistrict","districtNameStr","UNKNOWN_DISTRICT_KEY","STATE_NAMES","handleStatePageClick","push","handleCollapse","current","scrollIntoView","block","Fragment","onClick","ref","capitalize","formatLastUpdated","last_updated","bind","this","state","invert","HeaderCell","handleSort","Object","keys","sort","a","b"],"mappings":"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","file":"static/js/33.3bd7b26c.chunk.js","sourcesContent":["import {SPRING_CONFIG_NUMBERS, STATISTIC_CONFIGS} from '../constants.js';\r\nimport {formatNumber, getTableStatistic} from '../utils/commonFunctions';\r\n\r\nimport classnames from 'classnames';\r\nimport equal from 'fast-deep-equal';\r\nimport React from 'react';\r\nimport {animated, useSpring} from 'react-spring';\r\n\r\nconst Cell = ({statistic, data, isPerMillion, lastUpdatedTT}) => {\r\n  const {total, delta} = getTableStatistic(\r\n    data,\r\n    statistic,\r\n    isPerMillion,\r\n    lastUpdatedTT\r\n  );\r\n\r\n  const spring = useSpring({\r\n    total: total,\r\n    delta: delta,\r\n    config: SPRING_CONFIG_NUMBERS,\r\n  });\r\n\r\n  const statisticConfig = STATISTIC_CONFIGS[statistic];\r\n\r\n  return (\r\n    <div className=\"cell statistic\">\r\n      {!statisticConfig.hideDelta && (\r\n        <animated.div\r\n          className={classnames('delta', `is-${statistic}`)}\r\n          title={delta}\r\n        >\r\n          {spring.delta.interpolate((delta) =>\r\n            delta > 0\r\n              ? '\\u2191' + formatNumber(delta, statisticConfig.format)\r\n              : delta < 0\r\n              ? '\\u2193' + formatNumber(Math.abs(delta), statisticConfig.format)\r\n              : ''\r\n          )}\r\n        </animated.div>\r\n      )}\r\n\r\n      <animated.div className=\"total\" title={total}>\r\n        {spring.total.interpolate((total) =>\r\n          formatNumber(total, statisticConfig.format, statistic)\r\n        )}\r\n      </animated.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst isCellEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.data?.total, currProps.data?.total)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.data?.delta, currProps.data?.delta)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.isPerMillion, currProps.isPerMillion)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default React.memo(Cell, isCellEqual);\r\n","import Cell from './Cell';\r\nimport Tooltip from './Tooltip';\r\n\r\nimport {TABLE_STATISTICS, TABLE_STATISTICS_EXPANDED} from '../constants';\r\n\r\nimport {InfoIcon} from '@primer/octicons-v2-react';\r\nimport classnames from 'classnames';\r\nimport equal from 'fast-deep-equal';\r\nimport produce from 'immer';\r\nimport React, {useCallback} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nfunction DistrictRow({\r\n  stateCode,\r\n  districtName,\r\n  data,\r\n  isPerMillion,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  expandTable,\r\n  lastUpdatedTT,\r\n}) {\r\n  const {t} = useTranslation();\r\n\r\n  const highlightDistrict = useCallback(() => {\r\n    if (regionHighlighted.districtName !== districtName) {\r\n      setRegionHighlighted(\r\n        produce(regionHighlighted, (draftRegionHighlighted) => {\r\n          draftRegionHighlighted.stateCode = stateCode;\r\n          draftRegionHighlighted.districtName = districtName;\r\n        })\r\n      );\r\n    }\r\n  }, [regionHighlighted, districtName, setRegionHighlighted, stateCode]);\r\n\r\n  const tableStatistics = expandTable\r\n    ? TABLE_STATISTICS_EXPANDED\r\n    : TABLE_STATISTICS;\r\n\r\n  return (\r\n    <div\r\n      className={classnames('row', 'district', {\r\n        'is-highlighted': regionHighlighted?.districtName === districtName,\r\n      })}\r\n      onMouseEnter={highlightDistrict}\r\n    >\r\n      <div className=\"cell\">\r\n        <div className=\"state-name\">{t(districtName)}</div>\r\n        {data?.meta?.notes && (\r\n          <Tooltip {...{data: data.meta.notes}}>\r\n            <InfoIcon size={16} />\r\n          </Tooltip>\r\n        )}\r\n      </div>\r\n\r\n      {tableStatistics.map((statistic) => (\r\n        <Cell\r\n          key={statistic}\r\n          {...{statistic, data, isPerMillion, lastUpdatedTT}}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst isDistrictRowEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.data?.total, currProps.data?.total)) {\r\n    return false;\r\n  } else if (!equal(prevProps.data?.delta, currProps.data?.delta)) {\r\n    return false;\r\n  } else if (\r\n    !equal(prevProps.data?.['last_updated'], currProps.data?.['last_updated'])\r\n  ) {\r\n    return false;\r\n  } else if (!equal(prevProps.isPerMillion, currProps.isPerMillion)) {\r\n    return false;\r\n  } else if (\r\n    !equal(\r\n      prevProps.regionHighlighted.districtName,\r\n      currProps.regionHighlighted.districtName\r\n    ) &&\r\n    (equal(prevProps.regionHighlighted.districtName, prevProps.districtName) ||\r\n      equal(currProps.regionHighlighted.districtName, currProps.districtName))\r\n  ) {\r\n    return false;\r\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default React.memo(DistrictRow, isDistrictRowEqual);\r\n","import Cell from './Cell';\r\nimport DistrictRow from './DistrictRow';\r\nimport HeaderCell from './HeaderCell';\r\nimport Tooltip from './Tooltip';\r\n\r\nimport {\r\n  STATE_NAMES,\r\n  STATISTIC_CONFIGS,\r\n  TABLE_STATISTICS,\r\n  TABLE_STATISTICS_EXPANDED,\r\n  UNKNOWN_DISTRICT_KEY,\r\n} from '../constants';\r\nimport {\r\n  capitalize,\r\n  formatLastUpdated,\r\n  getTableStatistic,\r\n} from '../utils/commonFunctions';\r\n\r\nimport {\r\n  AlertIcon,\r\n  ClockIcon,\r\n  FilterIcon,\r\n  FoldUpIcon,\r\n  GraphIcon,\r\n  InfoIcon,\r\n} from '@primer/octicons-v2-react';\r\nimport classnames from 'classnames';\r\nimport equal from 'fast-deep-equal';\r\nimport produce from 'immer';\r\nimport React, {useState, useCallback, useRef} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {useSessionStorage} from 'react-use';\r\n\r\nfunction Row({\r\n  data,\r\n  stateCode,\r\n  districtName,\r\n  isPerMillion,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  expandTable,\r\n  lastUpdatedTT,\r\n}) {\r\n  const [showDistricts, setShowDistricts] = useState(false);\r\n  const [sortData, setSortData] = useSessionStorage('districtSortData', {\r\n    sortColumn: 'confirmed',\r\n    isAscending: false,\r\n    delta: false,\r\n  });\r\n\r\n  const history = useHistory();\r\n  const {t} = useTranslation();\r\n\r\n  const rowElement = useRef();\r\n\r\n  const handleSortClick = useCallback(\r\n    (statistic) => {\r\n      setSortData(\r\n        produce(sortData, (draftSortData) => {\r\n          draftSortData.isAscending = !sortData.isAscending;\r\n          draftSortData.sortColumn = statistic;\r\n        })\r\n      );\r\n    },\r\n    [sortData, setSortData]\r\n  );\r\n\r\n  const sortingFunction = useCallback(\r\n    (districtNameA, districtNameB) => {\r\n      if (sortData.sortColumn !== 'districtName') {\r\n        const statisticConfig = STATISTIC_CONFIGS[sortData.sortColumn];\r\n        const dataType =\r\n          sortData.delta && !statisticConfig.hideDelta ? 'delta' : 'total';\r\n\r\n        const statisticA = getTableStatistic(\r\n          data.districts[districtNameA],\r\n          sortData.sortColumn,\r\n          isPerMillion,\r\n          lastUpdatedTT\r\n        )[dataType];\r\n        const statisticB = getTableStatistic(\r\n          data.districts[districtNameB],\r\n          sortData.sortColumn,\r\n          isPerMillion,\r\n          lastUpdatedTT\r\n        )[dataType];\r\n        return sortData.isAscending\r\n          ? statisticA - statisticB\r\n          : statisticB - statisticA;\r\n      } else {\r\n        return sortData.isAscending\r\n          ? districtNameA.localeCompare(districtNameB)\r\n          : districtNameB.localeCompare(districtNameA);\r\n      }\r\n    },\r\n    [sortData, data, isPerMillion, lastUpdatedTT]\r\n  );\r\n\r\n  const highlightState = useCallback(() => {\r\n    if (stateCode) {\r\n      if (regionHighlighted.stateCode !== stateCode) {\r\n        setRegionHighlighted(\r\n          produce(regionHighlighted, (draftRegionHighlighted) => {\r\n            draftRegionHighlighted.stateCode = stateCode;\r\n            draftRegionHighlighted.districtName = null;\r\n          })\r\n        );\r\n      }\r\n    } else if (districtName) {\r\n      if (\r\n        regionHighlighted.districtName !== districtName ||\r\n        regionHighlighted.stateCode !== data.stateCode\r\n      ) {\r\n        setRegionHighlighted(\r\n          produce(regionHighlighted, (draftRegionHighlighted) => {\r\n            draftRegionHighlighted.stateCode = data.stateCode;\r\n            draftRegionHighlighted.districtName = districtName;\r\n          })\r\n        );\r\n      }\r\n    }\r\n  }, [\r\n    data.stateCode,\r\n    districtName,\r\n    regionHighlighted,\r\n    setRegionHighlighted,\r\n    stateCode,\r\n  ]);\r\n\r\n  const _setShowDistrict = useCallback(() => {\r\n    if (data.districts) {\r\n      setShowDistricts(!showDistricts);\r\n    }\r\n  }, [showDistricts, data]);\r\n\r\n  let districtNameStr = t(districtName);\r\n  if (districtName === UNKNOWN_DISTRICT_KEY) {\r\n    districtNameStr = `${t(UNKNOWN_DISTRICT_KEY)} [${t(\r\n      STATE_NAMES[data.stateCode]\r\n    )}]`;\r\n  }\r\n\r\n  const handleStatePageClick = useCallback(\r\n    (stateCode) => {\r\n      history.push(`state/${stateCode}`);\r\n    },\r\n    [history]\r\n  );\r\n\r\n  const handleCollapse = useCallback(() => {\r\n    setShowDistricts(false);\r\n    rowElement.current.scrollIntoView({\r\n      block: 'start',\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n    const faux = stateCode;\r\n  }, [stateCode]);\r\n\r\n  const tableStatistics = expandTable\r\n    ? TABLE_STATISTICS_EXPANDED\r\n    : TABLE_STATISTICS;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className={classnames(\r\n          'row',\r\n          {'is-total': stateCode === 'TT'},\r\n          {\r\n            'is-highlighted':\r\n              (stateCode && regionHighlighted?.stateCode === stateCode) ||\r\n              (districtName &&\r\n                regionHighlighted?.districtName === districtName &&\r\n                regionHighlighted?.stateCode === data.stateCode),\r\n          }\r\n        )}\r\n        onMouseEnter={highlightState}\r\n        onClick={_setShowDistrict}\r\n        ref={rowElement}\r\n      >\r\n        <div className=\"cell\">\r\n          <div className=\"state-name fadeInUp\">\r\n            {t(STATE_NAMES[stateCode]) || districtNameStr}\r\n          </div>\r\n          {data?.meta?.notes && (\r\n            <Tooltip {...{data: data.meta.notes}}>\r\n              <InfoIcon size={16} />\r\n            </Tooltip>\r\n          )}\r\n        </div>\r\n\r\n        {tableStatistics.map((statistic) => (\r\n          <Cell\r\n            key={statistic}\r\n            {...{data, statistic, isPerMillion, lastUpdatedTT}}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {showDistricts && (\r\n        <React.Fragment>\r\n          <div className=\"state-meta\">\r\n            <div className=\"state-meta-top\">\r\n              {data?.meta?.['last_updated'] && (\r\n                <p className=\"last-updated\">\r\n                  <ClockIcon />\r\n                  {capitalize(\r\n                    `${formatLastUpdated(data.meta.last_updated)} ${t('ago')}`\r\n                  )}\r\n                </p>\r\n              )}\r\n              <div\r\n                className=\"state-page\"\r\n                onClick={handleStatePageClick.bind(this, stateCode)}\r\n              >\r\n                <GraphIcon />\r\n                <span>\r\n                  {t('See more details on {{state}}', {\r\n                    state: stateCode,\r\n                  })}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {data.districts && UNKNOWN_DISTRICT_KEY in data.districts && (\r\n              <div className=\"state-meta-bottom\">\r\n                <div className={classnames('disclaimer')}>\r\n                  <AlertIcon />\r\n                  <span>\r\n                    {t('District-wise data not available in state bulletin')}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className={classnames('row', 'heading')}>\r\n            <div\r\n              className=\"cell heading\"\r\n              onClick={handleSortClick.bind(this, 'districtName')}\r\n            >\r\n              <div className=\"district-name\">{t('District')}</div>\r\n              {sortData.sortColumn === 'districtName' && (\r\n                <div\r\n                  className={classnames('sort-icon', {\r\n                    invert: !sortData.isAscending,\r\n                  })}\r\n                >\r\n                  <FilterIcon size={10} />\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {tableStatistics.map((statistic) => (\r\n              <HeaderCell\r\n                key={statistic}\r\n                {...{statistic, sortData, setSortData}}\r\n                handleSort={handleSortClick.bind(this, statistic)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </React.Fragment>\r\n      )}\r\n\r\n      {showDistricts &&\r\n        Object.keys(data.districts || {})\r\n          .sort((a, b) => sortingFunction(a, b))\r\n          .map((districtName) => (\r\n            <DistrictRow\r\n              data={data.districts[districtName]}\r\n              key={districtName}\r\n              {...{\r\n                districtName,\r\n                regionHighlighted,\r\n                setRegionHighlighted,\r\n                stateCode,\r\n                isPerMillion,\r\n                expandTable,\r\n                lastUpdatedTT,\r\n              }}\r\n            />\r\n          ))}\r\n\r\n      {showDistricts && (\r\n        <div className=\"spacer-row\">\r\n          <div className=\"spacer\">\r\n            <p>{`End of ${t(STATE_NAMES[stateCode])}'s districts`}</p>\r\n            <div className=\"fold\" onClick={handleCollapse}>\r\n              <FoldUpIcon />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.data?.total, currProps.data?.total)) {\r\n    return false;\r\n  } else if (!equal(prevProps.data?.delta, currProps.data?.delta)) {\r\n    return false;\r\n  } else if (!equal(prevProps.isPerMillion, currProps.isPerMillion)) {\r\n    return false;\r\n  } else if (\r\n    (!equal(\r\n      prevProps.regionHighlighted.stateCode,\r\n      currProps.regionHighlighted.stateCode\r\n    ) &&\r\n      equal(prevProps.regionHighlighted.stateCode, prevProps.stateCode)) ||\r\n    equal(currProps.regionHighlighted.stateCode, currProps.stateCode)\r\n  ) {\r\n    return false;\r\n  } else if (\r\n    (!equal(\r\n      prevProps.regionHighlighted.districtName,\r\n      currProps.regionHighlighted.districtName\r\n    ) &&\r\n      equal(\r\n        prevProps.regionHighlighted.districtName,\r\n        prevProps.districtName\r\n      )) ||\r\n    equal(currProps.regionHighlighted.districtName, currProps.districtName)\r\n  ) {\r\n    return false;\r\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\r\n    return false;\r\n  } else return true;\r\n};\r\n\r\nexport default React.memo(Row, isEqual);\r\n"],"sourceRoot":""}